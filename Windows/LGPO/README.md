# Overview

Contained within this directory are salt state files, one for each Windows group policy.
These were generated by scanning `C:\Windows\PolicyDefinitions`. The folder structure
follows the path scheme and layout found in the Administrative Templates section in the 
Windows Local Group Policy Editor.

There are a total of 4327 LPGO states contained within this directory.
A full list can be found [here](https://gitlab.twe.io/merix_studio/bacon-states/-/blob/lgpo/LGPO/README_LGPO_LIST.md)

## LGPO Contents

The top line of each sls file contains an identifier which indicates supported Windows
OS versions for the policy. E.g. 
```
# windows:SUPPORTED_Windows_10_0_RS2
#
```
This is followed by the help contents (as yaml comments) 
found in the policy definition and as seen in the Local Group Policy editor.

The policies,
where applicable, contain "placeholders" for variables which should be filled in by
the user who is applying the state. Examples for each placeholder type are shown below.


## SETTING ENABLED
Some policies don't have extra parameters, e.g. `Computer/Control Panel/Personalization/CPL_Personalization_NoChangingLockScreen.sls`
```
Prevent changing lock screen and logon image:
  lgpo.set:
  - name: CPL_Personalization_NoChangingLockScreen
  - setting: Enabled
  - policy_class: Machine
```

In this case, you may set `setting` equal to `Enabled`, `Disabled`, or `Not Configured`.


## ENUM-PLACEHOLDER
Some have paramters of type `enum`, e.g. `Computer/Control Panel/Regional and Language Options/LockMachineUILanguage.sls`
```
Restricts the UI language Windows uses for all logged users:
  lgpo.set:
  - name: LockMachineUILanguage
  - setting:
      UILangSelect: enum-placeholder
  - policy_class: Machine
```

These take specific arguments. It is recommended to view the available options in the Local Group Policy Editor. E.g.
```
Restricts the UI language Windows uses for all logged users:
  lgpo.set:
  - name: LockMachineUILanguage
  - setting:
      UILangSelect: English
  - policy_class: Machine
```

### NUMBERS IN ENUM -- FOR STATES LIKE ["ComplianceDeadline.sls"](https://github.com/Bacon-Unlimited/bacon-states/blob/65f9ac37c2b7bba6dc30558c2454093112a53bfa/Windows/LGPO/Computer/Windows%20Components/Windows%20Update/ComplianceDeadline.sls)
There are some LGPOs where an ENUM (list of values) contains only numbers
In that case, the number must be wrapped in double quotes. 
```
Specify deadlines for automatic updates and restarts:
  lgpo.set:
  - name: ComplianceDeadline
  - setting:
      ConfigureDeadlineForFeatureUpdates: enum-placeholder
      ConfigureDeadlineForQualityUpdates: enum-placeholder
      ConfigureDeadlineGracePeriod: enum-placeholder
      ConfigureDeadlineGracePeriodForFeatureUpdates: enum-placeholder
      ConfigureDeadlineNoAutoReboot: boolean-placeholder
  - policy_class: Machine
```

... should be...
```
Specify deadlines for automatic updates and restarts:
  lgpo.set:
  - name: ComplianceDeadline
  - setting:
      ConfigureDeadlineForFeatureUpdates: "14"
      ConfigureDeadlineForQualityUpdates: "14"
      ConfigureDeadlineGracePeriod: "7"
      ConfigureDeadlineGracePeriodForFeatureUpdates: "7"
      ConfigureDeadlineNoAutoReboot: true
  - policy_class: Machine
```


## TEXT-PLACEHOLDER  &  BOOLEAN-PLACEHOLDER
Some have placeholder type `text` and/or placeholder type `boolean`. The following example has both, e.g. `Control Panel/Personalization/CPL_Personalization_ForceDefaultLockScreen.sls`
```
Force a specific default lock screen and logon image:
  lgpo.set:
  - name: CPL_Personalization_ForceDefaultLockScreen
  - setting:
      LockScreenImage: text-placeholder
      LockScreenOverlaysDisabled: boolean-placeholder
  - policy_class: Machine
```
Which might be filled in as follows.
```
Force a specific default lock screen and logon image:
  lgpo.set:
  - name: CPL_Personalization_ForceDefaultLockScreen
  - setting:
      LockScreenImage: "C:\Users\bacon\MrsPiggy.jpg"
      LockScreenOverlaysDisabled: False
  - policy_class: Machine
```


## DECIMAL-PLACEHOLDER
Furthermore, some have placeholder type `decimal`, e.g. `Control Panel/Personalization/CPL_Personalization_StartBackground.sls`
```
Force a specific Start background:
  lgpo.set:
  - name: CPL_Personalization_StartBackground
  - setting:
      StartBackgroundSpin: decimal-placeholder
  - policy_class: Machine
```
Often the provided help can inform of valid choices, e.g.
```
Force a specific Start background:
  lgpo.set:
  - name: CPL_Personalization_StartBackground
  - setting:
      StartBackgroundSpin: 1
  - policy_class: Machine
```


## ADDITIONAL
Additionally, any policy with additional parameters can be `Disabled` or `Not Configured` by simply specifying such, without additional paramaters, e.g.
```
Force a specific Start background:
  lgpo.set:
  - name: CPL_Personalization_StartBackground
  - setting: Not Configured
  - policy_class: Machine
```

## Failed LGPOs

Below is a list of the currently known failed LGPO states

| state | error |
|  --- | --- |
| `Computer.Network.Lanman Server.Pol_CipherSuiteOrder` | `ValueError` | 
| `Computer.Network.Lanman Workstation.Pol_CipherSuiteOrder` | `ValueError` |
| `Computer.System.KDC.ForestSearch` | `ValueError` |
| `Computer.System.Kerberos.ForestSearch` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Corrupted File Recovery.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Disk Diagnostic.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Fault Tolerant Heap.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Microsoft Support Diagnostic Tool.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.MSI Corrupted File Recovery.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Windows Memory Leak Diagnosis.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Windows Performance PerfTrack.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.System.Troubleshooting and Diagnostics.Windows Resource Exhaustion Detection and Resolution.WdiScenarioExecutionPolicy` | `ValueError` |
| `Computer.Windows Components.Internet Explorer.EnterpriseModeSiteList` | `ValueError` |
| `Computer.Windows Components.Microsoft Edge.EnterpriseModeSiteList` | `ValueError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Applications.Calculator` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Applications.Notepad` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Finance` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Games` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Maps` | `KeyError` | 
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Music` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.News` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Reader` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Sports` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Travel` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Video` | `KeyError` |
| `Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Weather` | `KeyError` |
| `Computer.Windows Components.Windows Remote Shell.MaxConcurrentUsers` | `KeyError` |
| `User.Windows Components.Internet Explorer.EnterpriseModeSiteList` | `ValueError` |
| `User.Windows Components.Internet Explorer.Administrator Approved Controls.Carpoint` | `KeyError` |
| `User.Windows Components.Internet Explorer.Administrator Approved Controls.Investor` | `KeyError` |
| `User.Windows Components.Internet Explorer.Administrator Approved Controls.MSNBC` | `KeyError` |
| `User.Windows Components.Microsoft Edge.EnterpriseModeSiteList` | `ValueError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Applications.Calculator` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Applications.Notepad` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Finance` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Games` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Maps` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Music` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.News` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Reader` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Sports` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Travel` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Video` | `KeyError` |
| `User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Weather` | `KeyError` |

```
=========================== short test summary info ===========================
FAILED scripts/test_states.py::test_state[Computer.Network.Lanman Server.Pol_CipherSuiteOrder]
FAILED scripts/test_states.py::test_state[Computer.Network.Lanman Workstation.Pol_CipherSuiteOrder]
FAILED scripts/test_states.py::test_state[Computer.System.KDC.ForestSearch]
FAILED scripts/test_states.py::test_state[Computer.System.Kerberos.ForestSearch]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Corrupted File Recovery.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Disk Diagnostic.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Fault Tolerant Heap.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Microsoft Support Diagnostic Tool.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.MSI Corrupted File Recovery.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Windows Memory Leak Diagnosis.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Windows Performance PerfTrack.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.System.Troubleshooting and Diagnostics.Windows Resource Exhaustion Detection and Resolution.WdiScenarioExecutionPolicy]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Internet Explorer.EnterpriseModeSiteList]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft Edge.EnterpriseModeSiteList]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Applications.Calculator]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Applications.Notepad]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Finance]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Games]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Maps]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Music]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.News]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Reader]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Sports]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Travel]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Video]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Weather]
FAILED scripts/test_states.py::test_state[Computer.Windows Components.Windows Remote Shell.MaxConcurrentUsers]
FAILED scripts/test_states.py::test_state[User.Windows Components.Internet Explorer.EnterpriseModeSiteList]
FAILED scripts/test_states.py::test_state[User.Windows Components.Internet Explorer.Administrator Approved Controls.Carpoint]
FAILED scripts/test_states.py::test_state[User.Windows Components.Internet Explorer.Administrator Approved Controls.Investor]
FAILED scripts/test_states.py::test_state[User.Windows Components.Internet Explorer.Administrator Approved Controls.MSNBC]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft Edge.EnterpriseModeSiteList]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Applications.Calculator]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Applications.Notepad]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Finance]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Games]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Maps]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Music]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.News]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Reader]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Sports]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Travel]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Video]
FAILED scripts/test_states.py::test_state[User.Windows Components.Microsoft User Experience Virtualization.Windows Apps.Weather]
================ 44 failed, 4283 passed in 24198.55s (6:43:18) ================
```
